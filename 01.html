<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <title>ã‚ªãƒªã‚­ãƒ£ãƒ©Xé‹ç”¨ æˆåŠŸãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
        }
        .gradient-text {
            background: linear-gradient(to right, #4f46e5, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .section-title {
            border-left: 4px solid #4f46e5;
            padding-left: 1rem;
        }
        /* For custom scrollbar styling */
        #generated-content::-webkit-scrollbar {
            width: 8px;
        }
        #generated-content::-webkit-scrollbar-track {
            background: #2d3748; /* gray-800 */
        }
        #generated-content::-webkit-scrollbar-thumb {
            background: #4a5568; /* gray-600 */
            border-radius: 4px;
        }
        #generated-content::-webkit-scrollbar-thumb:hover {
            background: #718096; /* gray-500 */
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">

    <!-- Header / Hero Section -->
    <header class="bg-gray-900 py-20 sm:py-32">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-4xl md:text-6xl font-black tracking-tight text-white leading-tight">
                ã‚ãªãŸã®ã‚ªãƒªã‚­ãƒ£ãƒ©ãŒ<span class="gradient-text">ã€Œç¨¼ãåŠ›ã€</span>ã‚’æŒã¤ãŸã‚ã®<br>å®Œå…¨æˆåŠŸãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—
            </h1>
            <p class="mt-6 text-lg md:text-xl text-gray-400 max-w-3xl mx-auto">
                ã‚´ãƒ¼ãƒ«ã‹ã‚‰é€†ç®—ã™ã‚‹å…·ä½“çš„ãªã‚¹ãƒ†ãƒƒãƒ—ã‚’å¾¹åº•è§£èª¬ã€‚Xé‹ç”¨ã‚’ã€Œãªã‚“ã¨ãªãã€ã‹ã‚‰ã€Œæˆ¦ç•¥çš„ãªåç›Šæ´»å‹•ã€ã¸é€²åŒ–ã•ã›ã¾ã—ã‚‡ã†ã€‚
            </p>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">

        <!-- Chapter 1 Introduction -->
        <div class="text-center mb-20">
            <h2 class="text-3xl md:text-4xl font-bold text-white">ç¬¬1ç« ï¼šã‚ªãƒªã‚­ãƒ£ãƒ©Xé‹ç”¨ã®ã€ŒæˆåŠŸãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã€</h2>
            <p class="mt-4 text-gray-400">ã‚´ãƒ¼ãƒ«ã‹ã‚‰é€†ç®—ã™ã‚‹å…·ä½“çš„ãªã‚¹ãƒ†ãƒƒãƒ—ã‚’å­¦ã³ã€æˆåŠŸã¸ã®æœ€çŸ­ãƒ«ãƒ¼ãƒˆã‚’æ­©ã¿ã¾ã—ã‚‡ã†ã€‚</p>
        </div>

        <!-- Step 1-1: æˆé•·ã®é“ã®ã‚Š -->
        <section class="mb-24">
            <h3 class="text-2xl md:text-3xl font-bold mb-8 section-title">
                ã‚¹ãƒ†ãƒƒãƒ—1-1ï¼šã‚ªãƒªã‚­ãƒ£ãƒ©Xé‹ç”¨ã«ãŠã‘ã‚‹ã€Œæˆé•·ã®é“ã®ã‚Šã€
                <span class="block text-lg text-gray-400 mt-2">ã‚ãªãŸãŒä»Šã„ã‚‹å ´æ‰€ã¨ã€æ¬¡ã®ä¸€æ­©</span>
            </h3>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- æ®µéš0 -->
                <div class="bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 transform hover:scale-105 transition-transform duration-300">
                    <span class="text-indigo-400 font-bold text-sm">æ®µéš 0</span>
                    <h4 class="text-xl font-bold mt-2 text-white">æº–å‚™æœŸ</h4>
                    <p class="mt-3 text-gray-400">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®è¨­è¨ˆã¨ã€ãŠå®¢ã•ã‚“ã‚’å‘¼ã¶ãŸã‚ã®åœŸå°ä½œã‚Šã€‚ã‚ãªãŸã®ã€Œã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®ãŠåº—ã®é¡”ã€ã‚’å‰µã‚Šä¸Šã’ã¾ã™ã€‚</p>
                </div>
                <!-- æ®µéš1 -->
                <div class="bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 transform hover:scale-105 transition-transform duration-300">
                    <span class="text-indigo-400 font-bold text-sm">æ®µéš 1</span>
                    <h4 class="text-xl font-bold mt-2 text-white">åˆæœŸè‚²æˆæœŸ</h4>
                    <p class="mt-3 text-gray-400">ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼0â†’100äººé”æˆã€‚æœ€åˆã®æ”¯æ´è€…ã§ã‚ã‚Šã€æ–°ã—ã„ãŠå®¢ã•ã‚“ã‚’å‘¼ã³è¾¼ã‚€ã€Œç¨®ã€ã¨ãªã‚‹å­˜åœ¨ã‚’ç²å¾—ã—ã¾ã™ã€‚</p>
                </div>
                <!-- æ®µéš2 -->
                <div class="bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 transform hover:scale-105 transition-transform duration-300">
                    <span class="text-indigo-400 font-bold text-sm">æ®µéš 2</span>
                    <h4 class="text-xl font-bold mt-2 text-white">æˆé•·æœŸ</h4>
                    <p class="mt-3 text-gray-400">ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼100â†’1000äººä»¥ä¸Šã¸ã€‚è³ªã®é«˜ã„ã€Œè¦‹è¾¼ã¿å®¢ãƒªã‚¹ãƒˆã€ã‚’æœ¬æ ¼çš„ã«ä½œã‚Šå§‹ã‚ã¾ã™ã€‚</p>
                </div>
                <!-- æ®µéš3 -->
                <div class="bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 transform hover:scale-105 transition-transform duration-300">
                    <span class="text-indigo-400 font-bold text-sm">æ®µéš 3</span>
                    <h4 class="text-xl font-bold mt-2 text-white">åç›ŠåŒ–ãƒ»ãƒ–ãƒ©ãƒ³ãƒ‰ç¢ºç«‹æœŸ</h4>
                    <p class="mt-3 text-gray-400">åå…¥ã‚’æœ€å¤§åŒ–ã•ã›ã€ã‚ªãƒªã‚­ãƒ£ãƒ©ã‚’å¼·åŠ›ãªã€Œãƒ–ãƒ©ãƒ³ãƒ‰ã®é¡”ã€ã¨ã—ã¦å¸‚å ´ã«ç¢ºç«‹ã•ã›ã¾ã™ã€‚</p>
                </div>
            </div>
        </section>

        <!-- Step 1-2: æˆæœã®ç›®å®‰ï¼ˆKPIï¼‰ -->
        <section class="mb-24">
            <h3 class="text-2xl md:text-3xl font-bold mb-8 section-title">
                ã‚¹ãƒ†ãƒƒãƒ—1-2ï¼šå„æˆé•·æ®µéšã§è¿½ã„ã‹ã‘ã‚‹ã¹ãã€Œæˆæœã®ç›®å®‰ã€ï¼ˆKPIï¼‰
                <span class="block text-lg text-gray-400 mt-2">æ•°å€¤ã§é€²æ—ã‚’ç®¡ç†ã—ã€ç€å®Ÿã«ç¨¼ãåŠ›ã‚’é¤Šã†</span>
            </h3>
            <div class="space-y-8">
                <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700">
                    <h4 class="font-bold text-lg text-indigo-300">æ®µéš1ï¼šåˆæœŸè‚²æˆæœŸ ã®ä¸»ãªç›®æ¨™</h4>
                    <ul class="mt-4 space-y-2 list-disc list-inside text-gray-300">
                        <li><span class="font-semibold text-white">ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°ï¼š</span>æœ€ä½100äººé”æˆ</li>
                        <li><span class="font-semibold text-white">ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡ï¼š</span>å¹³å‡10%ä»¥ä¸Šï¼ˆæœ€ä½8%ï¼‰</li>
                    </ul>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700">
                    <h4 class="font-bold text-lg text-indigo-300">æ®µéš2ï¼šæˆé•·æœŸ ã®ä¸»ãªç›®æ¨™</h4>
                    <ul class="mt-4 space-y-2 list-disc list-inside text-gray-300">
                        <li><span class="font-semibold text-white">ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼å¢—åŠ æ•°ã¨ãã®è³ªï¼š</span>è³¼å…¥æ„æ¬²ã®é«˜ã„ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã®å¢—åŠ ã‚’é‡è¦–</li>
                        <li><span class="font-semibold text-white">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚„ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã¸ã®ã‚¯ãƒªãƒƒã‚¯æ•°ï¼š</span>åç›Šã¸ã®å°ç·šã‚’è¨ˆæ¸¬ãƒ»æ”¹å–„</li>
                        <li><span class="font-semibold text-white">è¦‹è¾¼ã¿å®¢ãƒªã‚¹ãƒˆ1ä»¶ã‚ãŸã‚Šã®ç²å¾—ã‚³ã‚¹ãƒˆï¼ˆCPLï¼‰ï¼š</span>åŠ¹ç‡æ€§ã‚’é«˜ã‚ã‚‹</li>
                    </ul>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700">
                    <h4 class="font-bold text-lg text-indigo-300">æ®µéš3ï¼šåç›ŠåŒ–ãƒ»ãƒ–ãƒ©ãƒ³ãƒ‰ç¢ºç«‹æœŸ ã®ä¸»ãªç›®æ¨™</h4>
                    <ul class="mt-4 space-y-2 list-disc list-inside text-gray-300">
                        <li><span class="font-semibold text-white">å„ç¨®ã®è»¢æ›ç‡ï¼ˆCVRï¼‰ï¼š</span>è³¼å…¥ç‡ã€åŠ å…¥ç‡ãªã©ã‚’å¾¹åº•åˆ†æ</li>
                        <li><span class="font-semibold text-white">ãŠå®¢ã•ã‚“1äººã‚ãŸã‚Šã®ç²å¾—ã‚³ã‚¹ãƒˆï¼ˆCPAï¼‰ï¼š</span>è²»ç”¨å¯¾åŠ¹æœã‚’æ­£ç¢ºã«æŠŠæ¡</li>
                        <li><span class="font-semibold text-white">ãŠå®¢ã•ã‚“1äººã‚ãŸã‚Šã®ç”Ÿæ¶¯ä¾¡å€¤ï¼ˆLTVï¼‰ï¼š</span>ç·åˆ©ç›Šã‚’æœ€å¤§åŒ–ã™ã‚‹</li>
                        <li><span class="font-semibold text-white">å…·ä½“çš„ãªåç›Šé¡ã€åˆ©ç›Šé¡ã€åˆ©ç›Šç‡ï¼š</span>æ´»å‹•ã®æœ€çµ‚çš„ãªæˆç¸¾è¡¨</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Step 1-3: 3ã¤ã®é‡è¦ãªã‚³ãƒ„ -->
        <section class="mb-24">
            <h3 class="text-2xl md:text-3xl font-bold mb-8 section-title">
                ã‚¹ãƒ†ãƒƒãƒ—1-3ï¼šå¤šãã®äººãŒçŸ¥ã‚‰ãªã„ã€Xã§ã€ŒãŠå®¢ã•ã‚“ã‚’å‘¼ã³è¾¼ã‚€ã€3ã¤ã®é‡è¦ãªã‚³ãƒ„
                <span class="block text-lg text-gray-400 mt-2">ç„¡é§„ãªé å›ã‚Šã‚’ã›ãšã€æœ€çŸ­ãƒ«ãƒ¼ãƒˆã§æˆåŠŸã¸</span>
            </h3>
            <div class="space-y-10">
                <!-- ã‚³ãƒ„1 -->
                <div class="flex flex-col md:flex-row items-center bg-gray-800 rounded-lg p-8 border border-gray-700">
                    <div class="flex-shrink-0 mb-6 md:mb-0 md:mr-8">
                        <div class="bg-indigo-500 text-white w-24 h-24 rounded-full flex items-center justify-center text-4xl font-black">1</div>
                    </div>
                    <div>
                        <h4 class="text-xl font-bold text-white">éš ã‚ŒãŸã€Œè¦‹è¾¼ã¿å®¢ã®å®åº«ã€ã‚’è¦‹ã¤ã‘å‡ºã›ï¼</h4>
                        <p class="mt-2 text-gray-400">Xã®<span class="text-pink-400 font-semibold">ã€Œã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã€æ©Ÿèƒ½</span>ã‚’æ´»ç”¨ã—ã€è³¼å…¥æ„æ¬²ã®é«˜ã„åˆæœŸã®ãŠå®¢ã•ã‚“ã‚’åŠ¹ç‡ã‚ˆãç²å¾—ã—ã¾ã™ã€‚åºƒå‘Šè²»ã‚¼ãƒ­ã§è³ªã®é«˜ã„è¦‹è¾¼ã¿å®¢ã¨å‡ºä¼šãˆã‚‹ã€è³¢ã„æ–¹æ³•ã§ã™ã€‚</p>
                    </div>
                </div>
                <!-- ã‚³ãƒ„2 -->
                <div class="flex flex-col md:flex-row items-center bg-gray-800 rounded-lg p-8 border border-gray-700">
                    <div class="flex-shrink-0 mb-6 md:mb-0 md:mr-8">
                        <div class="bg-pink-500 text-white w-24 h-24 rounded-full flex items-center justify-center text-4xl font-black">2</div>
                    </div>
                    <div>
                        <h4 class="text-xl font-bold text-white">ã€Œå½±éŸ¿åŠ›ã®ã‚ã‚‹äººã€ã®åŠ›ã‚’å€Ÿã‚Šã‚‹ï¼</h4>
                        <p class="mt-2 text-gray-400"><span class="text-indigo-400 font-semibold">æˆ¦ç•¥çš„ãªã€Œã‚®ãƒ–ã‚¢ãƒ³ãƒ‰ãƒ†ã‚¤ã‚¯ã€</span>ã®äº¤æµã§ã€æœ‰åŠ›ãªç´¹ä»‹ãƒ«ãƒ¼ãƒˆã‚’ç„¡æ–™ã§ç¯‰ãã¾ã™ã€‚ä»–è€…ãŒç¯‰ã„ãŸä¿¡é ¼ã‚’å€Ÿã‚Šã¦ã€ã‚ãªãŸã®æƒ…å ±ã‚’å·¨å¤§ãªé¡§å®¢ãƒªã‚¹ãƒˆã¸å±Šã‘ã¾ã™ã€‚</p>
                    </div>
                </div>
                <!-- ã‚³ãƒ„3 -->
                <div class="flex flex-col md:flex-row items-center bg-gray-800 rounded-lg p-8 border border-gray-700">
                    <div class="flex-shrink-0 mb-6 md:mb-0 md:mr-8">
                        <div class="bg-indigo-500 text-white w-24 h-24 rounded-full flex items-center justify-center text-4xl font-black">3</div>
                    </div>
                    <div>
                        <h4 class="text-xl font-bold text-white">ã€Œè¡Œåˆ—ã®å…ˆé ­ã€ã«å‰²ã‚Šè¾¼ã‚€ï¼</h4>
                        <p class="mt-2 text-gray-400"><span class="text-pink-400 font-semibold">ã€ŒX Premiumã€</span>ã¸ã®æŠ•è³‡ã§ã€ç«¶åˆã‚ˆã‚Šã‚‚å…ˆã«é¡§å®¢ã®ç›®ã«è§¦ã‚Œã‚‹ãƒãƒ£ãƒ³ã‚¹ã‚’å¢—ã‚„ã—ã¾ã™ã€‚ãƒªãƒ—ãƒ©ã‚¤ã®ä¸Šä½è¡¨ç¤ºæ©Ÿèƒ½ã‚’æ´»ç”¨ã—ã€ã‚ãªãŸã®å­˜åœ¨ã‚’éš›ç«‹ãŸã›ã¾ã—ã‚‡ã†ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 1-4: å¿ƒæ§‹ãˆ -->
        <section class="mb-24">
            <h3 class="text-2xl md:text-3xl font-bold mb-8 section-title">
                ã‚¹ãƒ†ãƒƒãƒ—1-4ï¼šXå¸‚å ´ã§ã€Œç¨¼ãç¶šã‘ã‚‹ã€ãŸã‚ã®ã€ãŸã£ãŸ1ã¤ã®å¤§åˆ‡ãªå¿ƒæ§‹ãˆ
            </h3>
            <div class="bg-gradient-to-br from-indigo-900 to-gray-900 p-8 rounded-lg border border-indigo-700 shadow-2xl">
                <h4 class="text-2xl font-bold text-white">è¦šæ‚Ÿï¼šXã®å¸‚å ´ã¯ã€Œå¯æ„›ã„ã ã‘ã§ã¯å£²ã‚Œãªã„ã€å³ã—ã„å ´æ‰€</h4>
                <p class="mt-4 text-gray-300">
                    ãƒ¤ãƒ•ã‚ªã‚¯ã‚’é¥ã‹ã«è¶…ãˆã‚‹<span class="font-bold text-yellow-300">æˆ¦ç•¥çš„ãªå·¥å¤«</span>ã¨<span class="font-bold text-yellow-300">é«˜ã„å“è³ª</span>ã“ããŒã€æœ¬ç‰©ã®ãŠå®¢ã•ã‚“ã‚’æ´ã‚€å”¯ä¸€ã®é“ã§ã™ã€‚
                </p>
                <p class="mt-4 text-gray-300">
                    ã“ã®å³ã—ã„å¸‚å ´ã§å‹ã¡æŠœãè¦šæ‚Ÿã‚’æ±ºã‚ãŸã¨ãã€ã‚ãªãŸã®ã‚ªãƒªã‚­ãƒ£ãƒ©ã¯åˆã‚ã¦çœŸã®ç¨¼ãåŠ›ã‚’å®¿ã—ã€ã‚ãªãŸã‚’çµŒæ¸ˆçš„ãªæˆåŠŸã¸ã¨å°ã<span class="gradient-text font-bold">æœ€å¼·ã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼</span>ã¨ãªã‚‹ã®ã§ã™ã€‚
                </p>
            </div>
        </section>

        <!-- âœ¨ AI Strategy Assistant Section (Gemini API) -->
        <section class="my-24">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-white">
                    âœ¨ ã‚ãªãŸã ã‘ã®æˆ¦ç•¥ã‚’AIãŒææ¡ˆ
                </h2>
                <p class="mt-4 text-gray-400 max-w-2xl mx-auto">
                    ã‚ãªãŸã®ã‚ªãƒªã‚­ãƒ£ãƒ©ã¨ç¾åœ¨ã®çŠ¶æ³ã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€GeminiãŒæ¬¡ã®ä¸€æ­©ã¨ãªã‚‹å…·ä½“çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³ã¨ãƒ„ã‚¤ãƒ¼ãƒˆæ¡ˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚
                </p>
            </div>

            <div class="max-w-3xl mx-auto bg-gray-800 p-8 rounded-lg shadow-lg border border-gray-700">
                <div class="space-y-6">
                    <div>
                        <label for="char-description" class="block text-sm font-medium text-gray-300 mb-2">ã‚ªãƒªã‚­ãƒ£ãƒ©ã®ç°¡å˜ãªèª¬æ˜</label>
                        <textarea id="char-description" rows="3" class="w-full bg-gray-900 border border-gray-600 rounded-md p-3 text-white focus:ring-indigo-500 focus:border-indigo-500 transition" placeholder="ä¾‹ï¼šã‚µã‚¤ãƒãƒ¼ãƒ‘ãƒ³ã‚¯ãªä¸–ç•Œã§æ´»èºã™ã‚‹çŒ«è€³ã®æ¢åµã€‚ã‚¯ãƒ¼ãƒ«ã ã‘ã©ç”˜ã„ã‚‚ã®ãŒå¥½ãã€‚"></textarea>
                    </div>
                    <div>
                        <label for="growth-stage" class="block text-sm font-medium text-gray-300 mb-2">ç¾åœ¨ã®æˆé•·æ®µéš</label>
                        <select id="growth-stage" class="w-full bg-gray-900 border border-gray-600 rounded-md p-3 text-white focus:ring-indigo-500 focus:border-indigo-500 transition">
                            <option value="æº–å‚™æœŸ">æ®µéš 0ï¼šæº–å‚™æœŸ</option>
                            <option value="åˆæœŸè‚²æˆæœŸ">æ®µéš 1ï¼šåˆæœŸè‚²æˆæœŸ</option>
                            <option value="æˆé•·æœŸ">æ®µéš 2ï¼šæˆé•·æœŸ</option>
                            <option value="åç›ŠåŒ–ãƒ»ãƒ–ãƒ©ãƒ³ãƒ‰ç¢ºç«‹æœŸ">æ®µéš 3ï¼šåç›ŠåŒ–ãƒ»ãƒ–ãƒ©ãƒ³ãƒ‰ç¢ºç«‹æœŸ</option>
                        </select>
                    </div>
                    <!-- API Key (One-time, in-memory only) -->
                    <div>
                        <label for="api-key" class="block text-sm font-medium text-gray-300 mb-2">APIã‚­ãƒ¼ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶å†…ã§ä¸€æ™‚åˆ©ç”¨ãƒ»ä¿å­˜ã—ã¾ã›ã‚“ï¼‰</label>
                        <input id="api-key" type="password" inputmode="text" autocomplete="off" spellcheck="false" class="w-full bg-gray-900 border border-gray-600 rounded-md p-3 text-white focus:ring-indigo-500 focus:border-indigo-500 transition" placeholder="ä¾‹ï¼šAIza... ã¾ãŸã¯ sk-..." aria-describedby="api-key-help" />
                        <p id="api-key-help" class="mt-2 text-xs text-gray-400">ã‚­ãƒ¼ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã®ã¿ãƒ¡ãƒ¢ãƒªä¸Šã§ä½¿ç”¨ã—ã€ãã®å¾Œã™ãç ´æ£„ã—ã¾ã™ã€‚localStorage, sessionStorage, Cookie ã¸ä¿å­˜ã—ã¾ã›ã‚“ã€‚</p>
                    </div>
                    <div>
                        <button id="generate-plan-btn" class="w-full bg-gradient-to-r from-indigo-500 to-pink-500 text-white font-bold py-3 px-6 rounded-lg hover:opacity-90 transition-opacity duration-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                            <span id="button-text">æˆ¦ç•¥ãƒ—ãƒ©ãƒ³ã‚’ç”Ÿæˆ âœ¨</span>
                        </button>
                    </div>
                </div>

                <!-- Result Area -->
                <div id="result-container" class="mt-8 p-6 bg-gray-900 rounded-lg border border-gray-700 hidden">
                    <!-- Loading spinner -->
                    <div id="loading-spinner" class="text-center hidden">
                        <svg class="animate-spin h-8 w-8 text-white mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <p class="mt-2 text-gray-400">AIãŒæˆ¦ç•¥ã‚’è€ƒãˆã¦ã„ã¾ã™...</p>
                    </div>
                    <!-- Error message -->
                    <div id="error-message" class="text-center text-red-400 hidden p-4 bg-red-900/50 rounded-md"></div>
                    <!-- Generated content -->
                    <div id="generated-content" class="prose prose-invert max-w-none text-gray-300 max-h-96 overflow-y-auto pr-2"></div>
                </div>
            </div>
        </section>

</main>

    <!-- Pager: back to 00 and next -->
    <nav class="bg-gray-800 text-gray-100 py-8">
        <div class="container mx-auto px-6 flex items-center justify-between">
            <a href="00.html" class="text-sm underline hover:text-white">ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹</a>
            <div class="space-x-3">
                <a href="02.html" class="inline-block bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded">æ¬¡ã¸ï¼ˆ02ï¼‰</a>
            </div>
        </div>
    </nav>

    <!-- Footer -->
    <footer class="bg-gray-800 mt-24">
        <div class="container mx-auto px-6 py-8 text-center text-gray-500">
            <p>&copy; 2024 ã‚ªãƒªã‚­ãƒ£ãƒ©Xé‹ç”¨ãƒ©ãƒœ. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // --- DOM Element References ---
        const generateBtn = document.getElementById('generate-plan-btn');
        const charDescriptionInput = document.getElementById('char-description');
        const growthStageSelect = document.getElementById('growth-stage');
        const resultContainer = document.getElementById('result-container');
        const loadingSpinner = document.getElementById('loading-spinner');
        const errorMessage = document.getElementById('error-message');
        const generatedContent = document.getElementById('generated-content');
        const buttonText = document.getElementById('button-text');
        const apiKeyInput = document.getElementById('api-key');

        // --- Event Listener ---
        generateBtn.addEventListener('click', handleGeneration);

        /**
         * Handles the click event for the generate button.
         * It orchestrates the UI updates, API call, and result display.
         */
        async function handleGeneration() {
            const charDescription = charDescriptionInput.value.trim();
            
            if (!charDescription) {
                displayError('ã‚ªãƒªã‚­ãƒ£ãƒ©ã®ç°¡å˜ãªèª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }

            setupUIForLoading();

            const growthStage = growthStageSelect.value;
            const apiKey = (apiKeyInput?.value || '').trim();

            if (!apiKey) {
                displayError('APIã‚­ãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ä¿å­˜ã¯ã—ã¾ã›ã‚“ã€‚');
                resetUIAfterLoading();
                return;
            }
            const prompt = createPrompt(charDescription, growthStage);

            try {
                const text = await callGeminiAPI(prompt, apiKey);
                const htmlContent = formatResponseToHTML(text);
                displaySuccess(htmlContent);
            } catch (error) {
                console.error('Error calling Gemini API:', error);
                displayError('AIã®å¿œç­”å–å¾—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');
            } finally {
                resetUIAfterLoading();
                // ä¸€æ™‚åˆ©ç”¨ã®ãŸã‚APIã‚­ãƒ¼ã‚’å³åº§ã«ç ´æ£„
                if (apiKeyInput) {
                    try {
                        // ä¸€æ—¦typeã‚’textã«åˆ‡ã‚Šæ›¿ãˆã¦ã‹ã‚‰å€¤ã‚’æ¶ˆã™ã¨ã€ãƒ–ãƒ©ã‚¦ã‚¶å®Ÿè£…ã«ã‚ˆã£ã¦ã¯ãƒ¡ãƒ¢ãƒªä¸Šã®æ‰±ã„ãŒæ”¹å–„ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
                        apiKeyInput.type = 'text';
                        apiKeyInput.value = '';
                        apiKeyInput.type = 'password';
                    } catch(_) {}
                }
            }
        }

        // --- UI Update Functions ---

        /**
         * Sets the UI to a loading state.
         */
        function setupUIForLoading() {
            generateBtn.disabled = true;
            buttonText.textContent = 'ç”Ÿæˆä¸­...';
            resultContainer.classList.remove('hidden');
            loadingSpinner.classList.remove('hidden');
            errorMessage.classList.add('hidden');
            generatedContent.innerHTML = '';
        }

        /**
         * Resets the UI back to its initial state after an API call.
         */
        function resetUIAfterLoading() {
            loadingSpinner.classList.add('hidden');
            generateBtn.disabled = false;
            buttonText.textContent = 'æˆ¦ç•¥ãƒ—ãƒ©ãƒ³ã‚’ç”Ÿæˆ âœ¨';
        }

        /**
         * Displays an error message in the UI.
         * @param {string} message - The error message to display.
         */
        function displayError(message) {
            resultContainer.classList.remove('hidden');
            errorMessage.textContent = message;
            errorMessage.classList.remove('hidden');
            loadingSpinner.classList.add('hidden'); // Ensure loading is hidden on error
        }

        /**
         * Displays the successfully generated content.
         * @param {string} htmlContent - The HTML content to display.
         */
        function displaySuccess(htmlContent) {
            generatedContent.innerHTML = htmlContent;
        }

        // --- Helper Functions ---

        /**
         * Creates the prompt for the Gemini API call.
         * @param {string} description - The character description.
         * @param {string} stage - The current growth stage.
         * @returns {string} The formatted prompt.
         */
        function createPrompt(description, stage) {
            return `
                ã‚ãªãŸã¯ãƒ—ãƒ­ã®X(Twitter)ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã§ã™ã€‚æ—¥æœ¬ã®ã€Œã‚ªãƒªã‚­ãƒ£ãƒ©ã€æ–‡åŒ–ã«ç²¾é€šã—ã¦ãŠã‚Šã€ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ãŒã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’åç›ŠåŒ–ã™ã‚‹ãŸã‚ã®æ”¯æ´ã‚’å°‚é–€ã¨ã—ã¦ã„ã¾ã™ã€‚

                ä»¥ä¸‹ã®æƒ…å ±ã«åŸºã¥ãã€å…·ä½“çš„ã§å®Ÿè·µçš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³ã¨ã€ã™ãã«ä½¿ãˆã‚‹ãƒ„ã‚¤ãƒ¼ãƒˆæ¡ˆã‚’3ã¤ææ¡ˆã—ã¦ãã ã•ã„ã€‚å‡ºåŠ›ã¯æ—¥æœ¬èªã§ã€ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã‹ã¤å°‚é–€çš„ãªãƒˆãƒ¼ãƒ³ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚

                # ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æƒ…å ±
                ${description}

                # ç¾åœ¨ã®æˆé•·æ®µéš
                ${stage}

                # å‡ºåŠ›å½¢å¼ã®å³å®ˆ
                ## ğŸ“ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³
                - [ç¾åœ¨ã®æˆé•·æ®µéšã«åˆã‚ã›ãŸã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®é­…åŠ›ã‚’æ´»ã‹ã™ãŸã‚ã®å…·ä½“çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³ã‚’ç®‡æ¡æ›¸ãã§3ã€œ5å€‹ææ¡ˆ]
                
                ## ğŸ’¬ ãƒ„ã‚¤ãƒ¼ãƒˆæ¡ˆ
                ### ãƒ„ã‚¤ãƒ¼ãƒˆæ¡ˆ1
                [ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®æ€§æ ¼ã‚„ä¸–ç•Œè¦³ãŒä¼ã‚ã‚‹ã‚ˆã†ãªãƒ„ã‚¤ãƒ¼ãƒˆæ–‡ã‚’140å­—ä»¥å†…ã§ä½œæˆã€‚ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã‚‚åŠ¹æœçš„ã«ä½¿ç”¨]
                ### ãƒ„ã‚¤ãƒ¼ãƒˆæ¡ˆ2
                [ãƒ•ã‚¡ãƒ³ã¨ã®äº¤æµã‚’ä¿ƒã™ã‚ˆã†ãªã€è³ªå•å½¢å¼ã‚„å‚åŠ å‹ã®ãƒ„ã‚¤ãƒ¼ãƒˆæ–‡ã‚’140å­—ä»¥å†…ã§ä½œæˆ]
                ### ãƒ„ã‚¤ãƒ¼ãƒˆæ¡ˆ3
                [ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®æ´»å‹•ã‚„ä»Šå¾Œã®å±•é–‹ã‚’åŒ‚ã‚ã›ã‚‹ã‚ˆã†ãªã€èˆˆå‘³ã‚’å¼•ããƒ„ã‚¤ãƒ¼ãƒˆæ–‡ã‚’140å­—ä»¥å†…ã§ä½œæˆ]
            `;
        }

        /**
         * Formats the raw text response from the API into clean HTML.
         * @param {string} text - The raw text from Gemini.
         * @returns {string} The formatted HTML string.
         */
        function formatResponseToHTML(text) {
             // A more robust markdown-like to HTML conversion
            return text
                .replace(/^## (.*)$/gm, '<h3 class="text-xl font-bold text-white mt-6 mb-4 border-b border-gray-700 pb-2">$1</h3>')
                .replace(/^### (.*)$/gm, '<h4 class="text-lg font-semibold text-indigo-300 mt-5 mb-2">$1</h4>')
                .replace(/^- (.*)$/gm, '<div class="flex items-start mb-2"><span class="text-indigo-400 mr-3 mt-1">â—†</span><p class="flex-1">$1</p></div>')
                .replace(/\n/g, '<br>')
                .replace(/<br><br>/g, '<br>'); // Prevent excessive line breaks
        }

        // --- Gemini API Call ---

        /**
         * Calls the Gemini API with exponential backoff for retries.
         * @param {string} prompt - The prompt to send to the API.
         * @param {number} retries - The number of retry attempts.
         * @param {number} delay - The initial delay between retries in ms.
         * @returns {Promise<string>} A promise that resolves with the generated text.
         */
        async function callGeminiAPI(prompt, apiKey, retries = 3, delay = 1000) {
            const payload = {
                contents: [{ role: "user", parts: [{ text: prompt }] }]
            };
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        cache: 'no-store',
                        referrerPolicy: 'no-referrer',
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    
                    const text = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                    if (text) {
                        return text;
                    } else {
                        throw new Error('API response did not contain expected content.');
                    }
                } catch (error) {
                    console.warn(`Attempt ${i + 1} failed. Retrying in ${delay}ms...`, error);
                    if (i === retries - 1) throw error; // Re-throw error on last attempt
                    await new Promise(resolve => setTimeout(resolve, delay));
                    delay *= 2; // Exponential backoff
                }
            }
        }
    </script>
</body>
</html>
