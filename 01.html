<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <title>オリキャラX運用 成功ロードマップ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
        }
        .gradient-text {
            background: linear-gradient(to right, #4f46e5, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .section-title {
            border-left: 4px solid #4f46e5;
            padding-left: 1rem;
        }
        /* For custom scrollbar styling */
        #generated-content::-webkit-scrollbar {
            width: 8px;
        }
        #generated-content::-webkit-scrollbar-track {
            background: #2d3748; /* gray-800 */
        }
        #generated-content::-webkit-scrollbar-thumb {
            background: #4a5568; /* gray-600 */
            border-radius: 4px;
        }
        #generated-content::-webkit-scrollbar-thumb:hover {
            background: #718096; /* gray-500 */
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">

    <!-- Header / Hero Section -->
    <header class="bg-gray-900 py-20 sm:py-32">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-4xl md:text-6xl font-black tracking-tight text-white leading-tight">
                あなたのオリキャラが<span class="gradient-text">「稼ぐ力」</span>を持つための<br>完全成功ロードマップ
            </h1>
            <p class="mt-6 text-lg md:text-xl text-gray-400 max-w-3xl mx-auto">
                ゴールから逆算する具体的なステップを徹底解説。X運用を「なんとなく」から「戦略的な収益活動」へ進化させましょう。
            </p>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">

        <!-- Chapter 1 Introduction -->
        <div class="text-center mb-20">
            <h2 class="text-3xl md:text-4xl font-bold text-white">第1章：オリキャラX運用の「成功ロードマップ」</h2>
            <p class="mt-4 text-gray-400">ゴールから逆算する具体的なステップを学び、成功への最短ルートを歩みましょう。</p>
        </div>

        <!-- Step 1-1: 成長の道のり -->
        <section class="mb-24">
            <h3 class="text-2xl md:text-3xl font-bold mb-8 section-title">
                ステップ1-1：オリキャラX運用における「成長の道のり」
                <span class="block text-lg text-gray-400 mt-2">あなたが今いる場所と、次の一歩</span>
            </h3>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- 段階0 -->
                <div class="bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 transform hover:scale-105 transition-transform duration-300">
                    <span class="text-indigo-400 font-bold text-sm">段階 0</span>
                    <h4 class="text-xl font-bold mt-2 text-white">準備期</h4>
                    <p class="mt-3 text-gray-400">アカウントの設計と、お客さんを呼ぶための土台作り。あなたの「オンラインのお店の顔」を創り上げます。</p>
                </div>
                <!-- 段階1 -->
                <div class="bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 transform hover:scale-105 transition-transform duration-300">
                    <span class="text-indigo-400 font-bold text-sm">段階 1</span>
                    <h4 class="text-xl font-bold mt-2 text-white">初期育成期</h4>
                    <p class="mt-3 text-gray-400">フォロワー0→100人達成。最初の支援者であり、新しいお客さんを呼び込む「種」となる存在を獲得します。</p>
                </div>
                <!-- 段階2 -->
                <div class="bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 transform hover:scale-105 transition-transform duration-300">
                    <span class="text-indigo-400 font-bold text-sm">段階 2</span>
                    <h4 class="text-xl font-bold mt-2 text-white">成長期</h4>
                    <p class="mt-3 text-gray-400">フォロワー100→1000人以上へ。質の高い「見込み客リスト」を本格的に作り始めます。</p>
                </div>
                <!-- 段階3 -->
                <div class="bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 transform hover:scale-105 transition-transform duration-300">
                    <span class="text-indigo-400 font-bold text-sm">段階 3</span>
                    <h4 class="text-xl font-bold mt-2 text-white">収益化・ブランド確立期</h4>
                    <p class="mt-3 text-gray-400">収入を最大化させ、オリキャラを強力な「ブランドの顔」として市場に確立させます。</p>
                </div>
            </div>
        </section>

        <!-- Step 1-2: 成果の目安（KPI） -->
        <section class="mb-24">
            <h3 class="text-2xl md:text-3xl font-bold mb-8 section-title">
                ステップ1-2：各成長段階で追いかけるべき「成果の目安」（KPI）
                <span class="block text-lg text-gray-400 mt-2">数値で進捗を管理し、着実に稼ぐ力を養う</span>
            </h3>
            <div class="space-y-8">
                <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700">
                    <h4 class="font-bold text-lg text-indigo-300">段階1：初期育成期 の主な目標</h4>
                    <ul class="mt-4 space-y-2 list-disc list-inside text-gray-300">
                        <li><span class="font-semibold text-white">フォロワー数：</span>最低100人達成</li>
                        <li><span class="font-semibold text-white">エンゲージメント率：</span>平均10%以上（最低8%）</li>
                    </ul>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700">
                    <h4 class="font-bold text-lg text-indigo-300">段階2：成長期 の主な目標</h4>
                    <ul class="mt-4 space-y-2 list-disc list-inside text-gray-300">
                        <li><span class="font-semibold text-white">フォロワー増加数とその質：</span>購入意欲の高いフォロワーの増加を重視</li>
                        <li><span class="font-semibold text-white">プロフィールやウェブサイトへのクリック数：</span>収益への導線を計測・改善</li>
                        <li><span class="font-semibold text-white">見込み客リスト1件あたりの獲得コスト（CPL）：</span>効率性を高める</li>
                    </ul>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg shadow-md border border-gray-700">
                    <h4 class="font-bold text-lg text-indigo-300">段階3：収益化・ブランド確立期 の主な目標</h4>
                    <ul class="mt-4 space-y-2 list-disc list-inside text-gray-300">
                        <li><span class="font-semibold text-white">各種の転換率（CVR）：</span>購入率、加入率などを徹底分析</li>
                        <li><span class="font-semibold text-white">お客さん1人あたりの獲得コスト（CPA）：</span>費用対効果を正確に把握</li>
                        <li><span class="font-semibold text-white">お客さん1人あたりの生涯価値（LTV）：</span>総利益を最大化する</li>
                        <li><span class="font-semibold text-white">具体的な収益額、利益額、利益率：</span>活動の最終的な成績表</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Step 1-3: 3つの重要なコツ -->
        <section class="mb-24">
            <h3 class="text-2xl md:text-3xl font-bold mb-8 section-title">
                ステップ1-3：多くの人が知らない、Xで「お客さんを呼び込む」3つの重要なコツ
                <span class="block text-lg text-gray-400 mt-2">無駄な遠回りをせず、最短ルートで成功へ</span>
            </h3>
            <div class="space-y-10">
                <!-- コツ1 -->
                <div class="flex flex-col md:flex-row items-center bg-gray-800 rounded-lg p-8 border border-gray-700">
                    <div class="flex-shrink-0 mb-6 md:mb-0 md:mr-8">
                        <div class="bg-indigo-500 text-white w-24 h-24 rounded-full flex items-center justify-center text-4xl font-black">1</div>
                    </div>
                    <div>
                        <h4 class="text-xl font-bold text-white">隠れた「見込み客の宝庫」を見つけ出せ！</h4>
                        <p class="mt-2 text-gray-400">Xの<span class="text-pink-400 font-semibold">「コミュニティ」機能</span>を活用し、購入意欲の高い初期のお客さんを効率よく獲得します。広告費ゼロで質の高い見込み客と出会える、賢い方法です。</p>
                    </div>
                </div>
                <!-- コツ2 -->
                <div class="flex flex-col md:flex-row items-center bg-gray-800 rounded-lg p-8 border border-gray-700">
                    <div class="flex-shrink-0 mb-6 md:mb-0 md:mr-8">
                        <div class="bg-pink-500 text-white w-24 h-24 rounded-full flex items-center justify-center text-4xl font-black">2</div>
                    </div>
                    <div>
                        <h4 class="text-xl font-bold text-white">「影響力のある人」の力を借りる！</h4>
                        <p class="mt-2 text-gray-400"><span class="text-indigo-400 font-semibold">戦略的な「ギブアンドテイク」</span>の交流で、有力な紹介ルートを無料で築きます。他者が築いた信頼を借りて、あなたの情報を巨大な顧客リストへ届けます。</p>
                    </div>
                </div>
                <!-- コツ3 -->
                <div class="flex flex-col md:flex-row items-center bg-gray-800 rounded-lg p-8 border border-gray-700">
                    <div class="flex-shrink-0 mb-6 md:mb-0 md:mr-8">
                        <div class="bg-indigo-500 text-white w-24 h-24 rounded-full flex items-center justify-center text-4xl font-black">3</div>
                    </div>
                    <div>
                        <h4 class="text-xl font-bold text-white">「行列の先頭」に割り込む！</h4>
                        <p class="mt-2 text-gray-400"><span class="text-pink-400 font-semibold">「X Premium」</span>への投資で、競合よりも先に顧客の目に触れるチャンスを増やします。リプライの上位表示機能を活用し、あなたの存在を際立たせましょう。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 1-4: 心構え -->
        <section class="mb-24">
            <h3 class="text-2xl md:text-3xl font-bold mb-8 section-title">
                ステップ1-4：X市場で「稼ぎ続ける」ための、たった1つの大切な心構え
            </h3>
            <div class="bg-gradient-to-br from-indigo-900 to-gray-900 p-8 rounded-lg border border-indigo-700 shadow-2xl">
                <h4 class="text-2xl font-bold text-white">覚悟：Xの市場は「可愛いだけでは売れない」厳しい場所</h4>
                <p class="mt-4 text-gray-300">
                    ヤフオクを遥かに超える<span class="font-bold text-yellow-300">戦略的な工夫</span>と<span class="font-bold text-yellow-300">高い品質</span>こそが、本物のお客さんを掴む唯一の道です。
                </p>
                <p class="mt-4 text-gray-300">
                    この厳しい市場で勝ち抜く覚悟を決めたとき、あなたのオリキャラは初めて真の稼ぐ力を宿し、あなたを経済的な成功へと導く<span class="gradient-text font-bold">最強のパートナー</span>となるのです。
                </p>
            </div>
        </section>

        <!-- ✨ AI Strategy Assistant Section (Gemini API) -->
        <section class="my-24">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-white">
                    ✨ あなただけの戦略をAIが提案
                </h2>
                <p class="mt-4 text-gray-400 max-w-2xl mx-auto">
                    あなたのオリキャラと現在の状況を入力するだけで、Geminiが次の一歩となる具体的なアクションプランとツイート案を生成します。
                </p>
            </div>

            <div class="max-w-3xl mx-auto bg-gray-800 p-8 rounded-lg shadow-lg border border-gray-700">
                <div class="space-y-6">
                    <div>
                        <label for="char-description" class="block text-sm font-medium text-gray-300 mb-2">オリキャラの簡単な説明</label>
                        <textarea id="char-description" rows="3" class="w-full bg-gray-900 border border-gray-600 rounded-md p-3 text-white focus:ring-indigo-500 focus:border-indigo-500 transition" placeholder="例：サイバーパンクな世界で活躍する猫耳の探偵。クールだけど甘いものが好き。"></textarea>
                    </div>
                    <div>
                        <label for="growth-stage" class="block text-sm font-medium text-gray-300 mb-2">現在の成長段階</label>
                        <select id="growth-stage" class="w-full bg-gray-900 border border-gray-600 rounded-md p-3 text-white focus:ring-indigo-500 focus:border-indigo-500 transition">
                            <option value="準備期">段階 0：準備期</option>
                            <option value="初期育成期">段階 1：初期育成期</option>
                            <option value="成長期">段階 2：成長期</option>
                            <option value="収益化・ブランド確立期">段階 3：収益化・ブランド確立期</option>
                        </select>
                    </div>
                    <!-- API Key (One-time, in-memory only) -->
                    <div>
                        <label for="api-key" class="block text-sm font-medium text-gray-300 mb-2">APIキー（ブラウザ内で一時利用・保存しません）</label>
                        <input id="api-key" type="password" inputmode="text" autocomplete="off" spellcheck="false" class="w-full bg-gray-900 border border-gray-600 rounded-md p-3 text-white focus:ring-indigo-500 focus:border-indigo-500 transition" placeholder="例：AIza... または sk-..." aria-describedby="api-key-help" />
                        <p id="api-key-help" class="mt-2 text-xs text-gray-400">キーはリクエスト時のみメモリ上で使用し、その後すぐ破棄します。localStorage, sessionStorage, Cookie へ保存しません。</p>
                    </div>
                    <div>
                        <button id="generate-plan-btn" class="w-full bg-gradient-to-r from-indigo-500 to-pink-500 text-white font-bold py-3 px-6 rounded-lg hover:opacity-90 transition-opacity duration-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                            <span id="button-text">戦略プランを生成 ✨</span>
                        </button>
                    </div>
                </div>

                <!-- Result Area -->
                <div id="result-container" class="mt-8 p-6 bg-gray-900 rounded-lg border border-gray-700 hidden">
                    <!-- Loading spinner -->
                    <div id="loading-spinner" class="text-center hidden">
                        <svg class="animate-spin h-8 w-8 text-white mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <p class="mt-2 text-gray-400">AIが戦略を考えています...</p>
                    </div>
                    <!-- Error message -->
                    <div id="error-message" class="text-center text-red-400 hidden p-4 bg-red-900/50 rounded-md"></div>
                    <!-- Generated content -->
                    <div id="generated-content" class="prose prose-invert max-w-none text-gray-300 max-h-96 overflow-y-auto pr-2"></div>
                </div>
            </div>
        </section>

</main>

    <!-- Pager: back to 00 and next -->
    <nav class="bg-gray-800 text-gray-100 py-8">
        <div class="container mx-auto px-6 flex items-center justify-between">
            <a href="00.html" class="text-sm underline hover:text-white">トップへ戻る</a>
            <div class="space-x-3">
                <a href="02.html" class="inline-block bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded">次へ（02）</a>
            </div>
        </div>
    </nav>

    <!-- Footer -->
    <footer class="bg-gray-800 mt-24">
        <div class="container mx-auto px-6 py-8 text-center text-gray-500">
            <p>&copy; 2024 オリキャラX運用ラボ. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // --- DOM Element References ---
        const generateBtn = document.getElementById('generate-plan-btn');
        const charDescriptionInput = document.getElementById('char-description');
        const growthStageSelect = document.getElementById('growth-stage');
        const resultContainer = document.getElementById('result-container');
        const loadingSpinner = document.getElementById('loading-spinner');
        const errorMessage = document.getElementById('error-message');
        const generatedContent = document.getElementById('generated-content');
        const buttonText = document.getElementById('button-text');
        const apiKeyInput = document.getElementById('api-key');

        // --- Event Listener ---
        generateBtn.addEventListener('click', handleGeneration);

        /**
         * Handles the click event for the generate button.
         * It orchestrates the UI updates, API call, and result display.
         */
        async function handleGeneration() {
            const charDescription = charDescriptionInput.value.trim();
            
            if (!charDescription) {
                displayError('オリキャラの簡単な説明を入力してください。');
                return;
            }

            setupUIForLoading();

            const growthStage = growthStageSelect.value;
            const apiKey = (apiKeyInput?.value || '').trim();

            if (!apiKey) {
                displayError('APIキーを入力してください。保存はしません。');
                resetUIAfterLoading();
                return;
            }
            const prompt = createPrompt(charDescription, growthStage);

            try {
                const text = await callGeminiAPI(prompt, apiKey);
                const htmlContent = formatResponseToHTML(text);
                displaySuccess(htmlContent);
            } catch (error) {
                console.error('Error calling Gemini API:', error);
                displayError('AIの応答取得中にエラーが発生しました。しばらくしてからもう一度お試しください。');
            } finally {
                resetUIAfterLoading();
                // 一時利用のためAPIキーを即座に破棄
                if (apiKeyInput) {
                    try {
                        // 一旦typeをtextに切り替えてから値を消すと、ブラウザ実装によってはメモリ上の扱いが改善される場合があります
                        apiKeyInput.type = 'text';
                        apiKeyInput.value = '';
                        apiKeyInput.type = 'password';
                    } catch(_) {}
                }
            }
        }

        // --- UI Update Functions ---

        /**
         * Sets the UI to a loading state.
         */
        function setupUIForLoading() {
            generateBtn.disabled = true;
            buttonText.textContent = '生成中...';
            resultContainer.classList.remove('hidden');
            loadingSpinner.classList.remove('hidden');
            errorMessage.classList.add('hidden');
            generatedContent.innerHTML = '';
        }

        /**
         * Resets the UI back to its initial state after an API call.
         */
        function resetUIAfterLoading() {
            loadingSpinner.classList.add('hidden');
            generateBtn.disabled = false;
            buttonText.textContent = '戦略プランを生成 ✨';
        }

        /**
         * Displays an error message in the UI.
         * @param {string} message - The error message to display.
         */
        function displayError(message) {
            resultContainer.classList.remove('hidden');
            errorMessage.textContent = message;
            errorMessage.classList.remove('hidden');
            loadingSpinner.classList.add('hidden'); // Ensure loading is hidden on error
        }

        /**
         * Displays the successfully generated content.
         * @param {string} htmlContent - The HTML content to display.
         */
        function displaySuccess(htmlContent) {
            generatedContent.innerHTML = htmlContent;
        }

        // --- Helper Functions ---

        /**
         * Creates the prompt for the Gemini API call.
         * @param {string} description - The character description.
         * @param {string} stage - The current growth stage.
         * @returns {string} The formatted prompt.
         */
        function createPrompt(description, stage) {
            return `
                あなたはプロのX(Twitter)マーケティングコンサルタントです。日本の「オリキャラ」文化に精通しており、クリエイターがキャラクターを収益化するための支援を専門としています。

                以下の情報に基づき、具体的で実践的なアクションプランと、すぐに使えるツイート案を3つ提案してください。出力は日本語で、フレンドリーかつ専門的なトーンでお願いします。

                # キャラクター情報
                ${description}

                # 現在の成長段階
                ${stage}

                # 出力形式の厳守
                ## 📝 アクションプラン
                - [現在の成長段階に合わせた、キャラクターの魅力を活かすための具体的なアクションプランを箇条書きで3〜5個提案]
                
                ## 💬 ツイート案
                ### ツイート案1
                [キャラクターの性格や世界観が伝わるようなツイート文を140字以内で作成。ハッシュタグも効果的に使用]
                ### ツイート案2
                [ファンとの交流を促すような、質問形式や参加型のツイート文を140字以内で作成]
                ### ツイート案3
                [キャラクターの活動や今後の展開を匂わせるような、興味を引くツイート文を140字以内で作成]
            `;
        }

        /**
         * Formats the raw text response from the API into clean HTML.
         * @param {string} text - The raw text from Gemini.
         * @returns {string} The formatted HTML string.
         */
        function formatResponseToHTML(text) {
             // A more robust markdown-like to HTML conversion
            return text
                .replace(/^## (.*)$/gm, '<h3 class="text-xl font-bold text-white mt-6 mb-4 border-b border-gray-700 pb-2">$1</h3>')
                .replace(/^### (.*)$/gm, '<h4 class="text-lg font-semibold text-indigo-300 mt-5 mb-2">$1</h4>')
                .replace(/^- (.*)$/gm, '<div class="flex items-start mb-2"><span class="text-indigo-400 mr-3 mt-1">◆</span><p class="flex-1">$1</p></div>')
                .replace(/\n/g, '<br>')
                .replace(/<br><br>/g, '<br>'); // Prevent excessive line breaks
        }

        // --- Gemini API Call ---

        /**
         * Calls the Gemini API with exponential backoff for retries.
         * @param {string} prompt - The prompt to send to the API.
         * @param {number} retries - The number of retry attempts.
         * @param {number} delay - The initial delay between retries in ms.
         * @returns {Promise<string>} A promise that resolves with the generated text.
         */
        async function callGeminiAPI(prompt, apiKey, retries = 3, delay = 1000) {
            const payload = {
                contents: [{ role: "user", parts: [{ text: prompt }] }]
            };
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        cache: 'no-store',
                        referrerPolicy: 'no-referrer',
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    
                    const text = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                    if (text) {
                        return text;
                    } else {
                        throw new Error('API response did not contain expected content.');
                    }
                } catch (error) {
                    console.warn(`Attempt ${i + 1} failed. Retrying in ${delay}ms...`, error);
                    if (i === retries - 1) throw error; // Re-throw error on last attempt
                    await new Promise(resolve => setTimeout(resolve, delay));
                    delay *= 2; // Exponential backoff
                }
            }
        }
    </script>
</body>
</html>
